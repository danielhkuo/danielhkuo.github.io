---
import BaseHead from '../components/BaseHead.astro';
import Hero from '../components/Hero.astro';
import NavButtons from '../components/NavButtons.astro';
import ProjectCard from '../components/ProjectCard.astro';
import ThemeToggle from '../components/ThemeToggle.svelte';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';
import '../styles/tailwind.css';

// Fetch all projects and filter for featured ones
const allProjects = await getCollection('projects');
const featuredProjects = allProjects.filter(project => project.data.featured);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<!-- External Resources -->
		<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
	</head>
	<body class="bg-background text-text font-lato min-h-screen flex justify-center">
		<!-- Theme Toggle Button -->
		<ThemeToggle client:load />
		
		<div class="container w-full max-w-4xl px-5 py-8">
			<!-- Hero Section -->
			<Hero />
			
			<!-- Navigation Buttons -->
			<NavButtons />
			
			<!-- Projects Section -->
			<section class="projects-section mt-16">
				<h2 class="text-2xl font-bold text-primary text-center mb-8">Featured Projects</h2>
				<div class="projects grid grid-cols-1 md:grid-cols-2 gap-6">
					{featuredProjects.map((project) => (
						<ProjectCard
							title={project.data.title}
							description={project.data.description}
							tech={project.data.tech}
							repoUrl={project.data.repoUrl}
							emoji={project.data.emoji}
						/>
					))}
				</div>
			</section>
			
			<!-- Footer Quote -->
			<div class="footer-note text-center mt-16">
				<p class="text-secondary mb-2">
					"If we find ourselves with a desire that nothing in this world can satisfy, the most probable explanation is that we were made for another world."
				</p>
				<p class="footer-credits text-xs opacity-70 text-secondary">
					Credits: Info buttons inspired by natalia reshetnikova, skills inspired by ykadosh and social icons by kieranfivestars
				</p>
			</div>
		</div>
	</body>
</html>
