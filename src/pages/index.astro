---
import BaseHead from "../components/BaseHead.astro";
import Hero from "../components/Hero.astro";
import CarbonProjectCard from "../components/CarbonProjectCard.svelte";
import CarbonProjectModalWrapper from "../components/CarbonProjectModalWrapper.astro";
import Header from "../components/Header.svelte";

import ThemeSwitcher from "../components/ThemeSwitcher.svelte";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from "astro:content";

// 1) Fetch all projects
const allProjects = await getCollection("projects");
const featuredProjects = allProjects.filter((project) => project.data.featured);

// 2) Define Curated Stack & Bio
// REORDERED: Hard skills first, soft skills (Project Management) last.
const featuredSkills = [
  "Java",
  "Python",
  "Go",
  "TypeScript",
  "Oracle Cloud",
  "Project Management",
];

const bio =
  "I am a passionate software engineer with a strong foundation in computer science. I love building scalable web applications and exploring new technologies.";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <!-- External Resources -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Global Sticky Header -->
    <Header client:load />

    <!-- Theme Switcher -->
    <ThemeSwitcher client:load />

    <!-- Container -->
    <div class="container w-full max-w-4xl px-5 py-8 mt-16">
      <div class="animate-fade-in-up">
        <Hero skills={featuredSkills} bio={bio} />
      </div>

      <!-- Projects Section -->
      <section
        class="projects-section mt-16 animate-fade-in-up"
        style="animation-delay: 200ms;"
      >
        <h2 class="text-2xl font-bold text- text-center mb-8">
          Featured Projects
        </h2>
        <div class="projects grid grid-cols-1 md:grid-cols-2 gap-6">
          {
            featuredProjects.map((project) => (
              <CarbonProjectCard
                title={project.data.title}
                description={project.data.description}
                tech={project.data.tech}
                repoUrl={project.data.repoUrl}
                slug={project.slug}
                client:load
              />
            ))
          }
        </div>
      </section>

      <!-- Footer Quote -->
      <div class="footer-note text-center mt-16">
        <p class="text-text-secondary mb-2">
          "If we find ourselves with a desire that nothing in this world can
          satisfy, the most probable explanation is that we were made for
          another world."
        </p>
        <p class="footer-credits text-xs opacity-70 text-text-secondary">
          Credits: Me :)
        </p>
      </div>
    </div>

    <!-- Project Modals -->
    {
      featuredProjects.map((project) => (
        <CarbonProjectModalWrapper project={project} />
      ))
    }
  </body>
</html>
