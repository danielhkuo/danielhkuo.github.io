---
// Hero.astro - Receives skills as a prop and renders them dynamically.
// 1. Receive the 'skills' array passed from index.astro
// Hero.astro - Receives skills as a prop and renders them dynamically.
// 1. Receive the 'skills' array passed from index.astro
const { skills } = Astro.props;

import { getIcon } from "../consts/tech-stack";

const baseSkills = skills ?? [];
---

<section
  class="hero-section bg-card-bg rounded-2xl p-8 shadow-lg mb-10 animate-float"
>
  <!-- Carbon Grid System using CSS classes -->
  <div class="cds--grid cds--grid--full-width">
    <div class="cds--row hero-row">
      <!-- Header Info -->
      <div
        class="cds--col-lg-6 cds--col-md-6 cds--col-sm-4 hero-content text-center lg:text-left"
      >
        <!-- Identity Block - Enhanced visual hierarchy and grouping -->
        <div class="identity-block pl-8">
          <h1
            class="hero-title text-4xl lg:text-5xl font-bold text-primary micro-space-1"
          >
            Daniel Kuo
          </h1>
          <p class="hero-subtitle text-lg lg:text-xl text-accent micro-space-1">
            Computer Science | Developer | Tech Enthusiast
          </p>
          <p class="hero-education italic text-text-secondary">
            B.S. Computer Science @ Rice University
          </p>
        </div>

        <!-- Skills Grid (Static) -->
        <div class="skills-grid-wrapper mt-6">
          <div class="skills-grid">
            {
              baseSkills.map((skill: string) => (
                <span class="cds--tag cds--tag--outline cds--tag--sm skill-tag-compact">
                  <i class:list={[getIcon(skill), "mr-2", "text-primary"]} />
                  <span class="cds--tag__label">{skill}</span>
                </span>
              ))
            }
          </div>
        </div>
      </div>

      <!-- Headshot - Simplified structure -->
      <div class="cds--col-lg-6 cds--col-md-2 cds--col-sm-4 hero-image">
        <div class="headshot-container">
          <img
            alt="Daniel Kuo headshot"
            fetchpriority="high"
            decoding="async"
            loading="eager"
            class="headshot shadow-lg"
            src="/headshot.webp"
          />
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Fix uneven spacing in identity block by normalizing line heights */
  .identity-block > * {
    line-height: 1.15; /* tighter, uniform height */
  }

  /* Fix left alignment jaggedness caused by different font sizes and italic text */
  .identity-block .hero-title {
    margin-left: calc(
      1rem - 0.05em
    ); /* Base margin plus adjustment for bold text */
  }

  .identity-block .hero-subtitle {
    margin-left: calc(
      1rem - 0.02em
    ); /* Base margin plus adjustment for medium text */
  }

  .identity-block .hero-education {
    margin-left: calc(
      1rem + 0.1em
    ); /* Base margin plus adjustment for italic text */
    font-style: italic;
  }

  /* Make headshot larger on desktop */
  .headshot {
    width: 100%;
    height: auto;
    max-width: 400px; /* Larger than the default 512px constraint */
    aspect-ratio: 1;
    object-fit: cover;
  }

  /* On mobile, reset the left margins since text is centered */
  @media (max-width: 671px) {
    .identity-block .hero-title,
    .identity-block .hero-subtitle,
    .identity-block .hero-education {
      margin-left: 0;
    }

    .headshot {
      max-width: 300px; /* Smaller on mobile */
    }
  }

  /* Wrapper for the static skills grid */
  .skills-grid-wrapper {
    background-color: var(--card-bg);
    border: 1px solid var(--cds-border-subtle, rgba(255, 255, 255, 0.1));
    border-radius: 0.75rem;
    padding: 0.75rem;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    position: relative;
    margin-left: auto;
    margin-right: auto;
    box-shadow:
      0 2px 4px -1px rgba(0, 0, 0, 0.1),
      0 1px 2px -1px rgba(0, 0, 0, 0.06);
  }

  /* Static Grid Layout */
  .skills-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.375rem;
    justify-content: center; /* Center tags on mobile */
  }

  /* Keep tags consistent */
  .skill-tag-compact {
    margin: 0;
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
  }

  /* On desktop, align the grid to the left */
  @media (min-width: 672px) {
    .skills-grid-wrapper {
      margin-left: 0;
      margin-right: 0;
    }
    .skills-grid {
      justify-content: flex-start;
    }
  }
</style>
